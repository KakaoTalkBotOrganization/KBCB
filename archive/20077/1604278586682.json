{
    "result": {
        "article": {
            "commentCount": 21,
            "contentElements": [
                {
                    "json": {
                        "hasLink": "false",
                        "height": "211",
                        "inKey": "V12799c0cf80622a3e5c37a735141f858455225e6663a427c14c78cb47904a33c8bca7a735141f8584552",
                        "vid": "12685AB7A2E0A353A62C762AF201F2F2B137",
                        "width": "375"
                    },
                    "type": "MOVIE"
                },
                {
                    "json": {
                        "hasLink": "false",
                        "height": "211",
                        "inKey": "V128b3619a83098c8f471da0b300a64198f86a26055f5182ec4b2a3fa1fa439e346e6da0b300a64198f86",
                        "vid": "6A0D1A57FB62E9C8068F57672252EE9AE659",
                        "width": "375"
                    },
                    "type": "MOVIE"
                },
                {
                    "json": {
                        "hasLink": "false",
                        "height": "211",
                        "inKey": "V121b0d243047b2016689a5528a3c421cd154799e91d0a63cf7186a521d8feb07d937a5528a3c421cd154",
                        "vid": "E76F942E5CEC5AC6DC7805037D38BE569F5F",
                        "width": "375"
                    },
                    "type": "MOVIE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 375,
                            "service": "CAFE",
                            "style": "width: 500px; height: 375px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjBfNTUg/MDAxNTkyNjE0ODgyNDIw.T04OOfL4X7PanQYzq3lyt-3PkQIEIiHpzBemcLZX4VEg.BN2a3irxZRPIzOHm1zjHOossGcCK1WS6rj4LBnpbJy0g.GIF/giphy_%2813%29.gif",
                            "width": 500
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "service": "DTHUMB",
                            "type": "cafe_wa420",
                            "url": "https://dthumb-phinf.pstatic.net/?src=%22https%3A%2F%2Fdiscord.js.org%2Fstatic%2Flogo.svg%22"
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 145,
                            "service": "CAFE",
                            "style": "width: 248px; height: 145px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjBfMjY5/MDAxNTkyNjE2ODY5Njg2.IpaSct0a4fsmgAIytCtURoPCibymsc75rGTJFDq_2D8g.iB7zpiJ39x7VlVU5oGSmiWxmxrr4a0w3RB-rQ2Q4WMog.PNG/%EC%9D%B4%EB%AF%B8%EC%A7%80_2.png",
                            "width": 248
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 310,
                            "service": "CAFE",
                            "style": "width: 486px; height: 310px;font-size: 13.3333px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjBfMzEg/MDAxNTkyNjE3NDE3Mjkz.mLHHnZhuzOIfcdHgwpuX77tr3-s8TeX3uvVupa9qgr4g.HMONP8gzvg9MizgS9tkJhUPHvZ184O1rAm-b-psFzTcg.PNG/%EC%9D%B4%EB%AF%B8%EC%A7%80_3.png",
                            "width": 486
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 281,
                            "service": "CAFE",
                            "style": "width: 500px; height: 281px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjBfMjA4/MDAxNTkyNjE4NDIyNTc5.b94UNkYnuQHVBfx7wCoNDf_7AvTjQhJwEapeV15lCVUg.BBwtkYcTUvyTUuWlUlRPm33NEuDtUy-dfomUaWpoKbMg.GIF/giphy_%2814%29.gif",
                            "width": 500
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 200,
                            "service": "CAFE",
                            "style": "width: 270px; height: 200px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjFfNjIg/MDAxNTkyNzA3MDExMTQ2.QBOS7nxU1bIQysEcy6qkm02fuIuRxLEQyyooQw2c_vEg.09hJlbU9OjGh57nQW9OHhq-K8KkmAqaoGDFNGA-hWQ0g.PNG/%EC%9D%B4%EB%AF%B8%EC%A7%80_6.png",
                            "width": 270
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 171,
                            "service": "CAFE",
                            "style": "width: 299px; height: 171px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjFfMTQy/MDAxNTkyNzA3Mjc4NzIx.um5Oa8QiIYMdE4lYWKE4E5IWPrBUxrvBHHEbCZ6a8F4g.RqEuMqTXPki6OEn2VlD__rjTvwA1TjqWn5isEKOrG-gg.PNG/speech-api-lead.png",
                            "width": 299
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 310,
                            "service": "CAFE",
                            "style": "width: 285px; height: 310px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjFfMjY4/MDAxNTkyNzI1NzE1OTYw.vjk04_m3BHesDi5w2U7uuCoznnl0KQsSU5TcpWXJXCkg.3CqtyirrS_JpiQsJiz3Jh4IPW4IgKxBqeBWSnCpAMLUg.PNG/%EC%9D%B4%EB%AF%B8%EC%A7%80_9.png",
                            "width": 285
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 317,
                            "service": "CAFE",
                            "style": "width: 324px; height: 317px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjFfMTEy/MDAxNTkyNzI2MjI3OTE1.cGWy8UdxEYxbwsVvNKd40DNAZ2xOtZRyG6GkWKGUm8Eg.Erqn3YGXbWU2mncVfReHnlyHpjg97HVtwE9a8C7v1jog.PNG/%EC%9D%B4%EB%AF%B8%EC%A7%80_10.png",
                            "width": 324
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 247,
                            "service": "CAFE",
                            "style": "width: 420px; height: 247px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjFfMTY4/MDAxNTkyNzM1OTI0NzU4.wKQs11wpz3zraINypof23SZLCJuhCm2tmLq5a0MJptcg.hjhx0z8gjUy7uGhtJelQooFDDoX5GB3udwsKagT0edog.GIF/giphy_%2815%29.gif",
                            "width": 420
                        }
                    },
                    "type": "IMAGE"
                },
                {
                    "json": {
                        "from": "MOBILEWEB",
                        "image": {
                            "height": 310,
                            "service": "CAFE",
                            "style": "width: 740px; height: 310px;",
                            "type": "w740",
                            "url": "https://mcafethumb-phinf.pstatic.net/MjAyMDA2MjFfNzUg/MDAxNTkyNzM2MTA3MTkz.LHulrtwK572onpJNS7-dWEQscHYSHBAOMyzyw286M9wg.9fSULrFFQiMQWyHOg4FvfzmAGN9RFLCc_wjcbcEJ808g.PNG/%EC%9D%B4%EB%AF%B8%EC%A7%80_11.png",
                            "width": 740
                        }
                    },
                    "type": "IMAGE"
                }
            ],
            "contentHtml": "<span style=\"font-family: Arial;\">[[[CONTENT-ELEMENT-3]]]</span><div><span style=\"font-family: Arial;\"><br /></span></div><div><span style=\"font-family: Arial;\"><br /></span></div><div><font face=\"Arial\">안녕하세요. 그동안 뭘 쓸까, 이걸 쓰기엔 시간이 너무 아까운데 싶다가도</font></div><div><font face=\"Arial\">예전에 한 번 시도해본 디스코드 봇이 요즘 유행하길래 저도 코인 탑승을 해봤습니다.</font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">그런데, 남들이 하는 거 다 하면 제가 뭣하러 글을 쓸까요? 다른 분들이 더 잘 할텐데.</font></div><div><font face=\"Arial\">이번 글에서는 봇이 음성 채널에 참가하고 실시간으로 음성을 분석, 음성으로 대답을 해주는 음성 인식 봇을 만드려고 합니다.</font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><ul><li><font face=\"Arial\" style=\"\"><span style=\"font-size: 14.6667px;\"><b>&#128266;</b></span><span style=\"font-size: 11pt;\"><b>&nbsp; 음성채널에 참가해서 mp3 재생</b></span></font></li><li><font face=\"Arial\"><span style=\"font-size: 14.6667px;\"><b>&#127911;</b></span></font><span style=\"font-family: Arial; font-size: 11pt;\"><b>&nbsp;실시간 음성 명령어 인식</b></span></li><ul><li><font face=\"Arial\"><span style=\"font-size: 11pt;\">Speech To Text</span></font></li><li><font face=\"Arial\"><span style=\"font-size: 11pt;\">자연어 분석</span></font></li></ul><li><font face=\"Arial\"><span style=\"font-size: 14.6667px;\">&#128221; <b>유한 오토마톤으로 상태 관리</b></span></font></li><li><font face=\"Arial\" style=\"\"><span style=\"font-size: 14.6667px;\"><b>&#127908;</b></span><span style=\"font-size: 11pt;\"><b>&nbsp;명령어 답변 음성으로 재생</b></span></font></li></ul></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><span style=\"font-size: 24px;\"><b>&#128266;</b></span></font><b><span style=\"font-size: 18pt;\">&nbsp; 음성채널에 참가해서 mp3 재생</span></b></div><div><font face=\"Arial\"><br /></font></div><div>[[[CONTENT-ELEMENT-4]]]</div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">디스코드가 지원하는 API 를 사용할 수 있는 언어는 다양하지만, 제게 있어서 가장 개발속도도 빠르고 능숙하게 다룰 수 있는 자바스크립트를 지원하는, <a href=\"https://discord.js.org/#/http://\" target=\"_blank\" title=\"새창으로 열림\">Discord.JS</a> 를 사용하도록 하겠습니다. 아, 요즘 타입스크립트 연습도 하고 있으니 이왕 타입스크립트로 개발하도록 하죠.</font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">타입스크립트의 d.ts 파일은, <a href=\"https://github.com/discordjs/discord.js-typings\" target=\"_blank\" title=\"새창으로 열림\">여기</a>에서 다운받아 사용했습니다.</font></div><div><font face=\"Arial\"><br /></font></div><div><br /></div><div>뭐, 일단 디스코드 앱을 설정해서 봇 토큰을 발급하고, &quot;Ping&quot; 이라 보내면 &quot;Pong&quot; 하고 돌아오는 과정까진 모두 쉽게 하시리라고 생각합니다. 아니라면 다른 분들의 훌륭한 강좌를 보고 오세요. 저는 강좌가 아니라 그냥 놀이니까.</div><div><br /></div><div><br /></div><div>[[[CONTENT-ELEMENT-5]]]<br /></div><div><br /></div><div><br /></div><div>의외로 음성채널 채팅에 참가하는 것은 매우 간단하더라고요.</div><div>코드 한 줄 이면 참가가 가능했습니다.</div><div><br /></div><div>보이스 채널에 참가한 상태로, 메시지를 보내 트리거를 추가하면 참가가 가능했습니다.</div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;Discord&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;discord.js&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;Message&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;discord.js&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;client&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Discord.Client();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">client.on(<span style=\"color:#993333\">&apos;message&apos;</span>,&nbsp;async&nbsp;(msg:&nbsp;Message)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">!</span>msg.guild&nbsp;)&nbsp;<span style=\"color:#ff3399\">return</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;msg.content&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#993333\">&quot;!참가&quot;</span>&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;connection&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;await&nbsp;msg?.member?.voice?.channel?.join();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">});</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div><br /></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div>[[[CONTENT-ELEMENT-6]]]</div><div><font face=\"Arial\" color=\"#9a9a9a\">위 코드의 결과</font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">이제, mp3 아무거나 다운을 받고 재생을 시켜봅시다.</font></div><div><font face=\"Arial\">mp3 등 오디오파일을 다루려면 <a href=\"https://www.npmjs.com/package/ffmpeg-static\" target=\"_blank\" title=\"새창으로 열림\">ffmpeg</a>&nbsp;가 필요하다고 합니다.</font></div><div><font face=\"Arial\">설치해줍니다.</font></div><div><font face=\"Arial\"><br /></font></div><div><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\">npm&nbsp;install&nbsp;ffmpeg<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">-</span><span style=\"color:#ff3399\">static</span></div></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div><br /></div><div><font face=\"Arial\"><br /></font></div><div><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div><div style=\"line-height:130%\">14</div><div style=\"line-height:130%\">15</div><div style=\"line-height:130%\">16</div><div style=\"line-height:130%\">17</div><div style=\"line-height:130%\">18</div><div style=\"line-height:130%\">19</div><div style=\"line-height:130%\">20</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;Discord&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;discord.js&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;Message,&nbsp;VoiceConnection&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;discord.js&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;path&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;path&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;client&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Discord.Client();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">var</span>&nbsp;connection:&nbsp;VoiceConnection;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">client.on(<span style=\"color:#993333\">&apos;message&apos;</span>,&nbsp;async&nbsp;(msg:&nbsp;Message)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">!</span>msg.guild&nbsp;)&nbsp;<span style=\"color:#ff3399\">return</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;msg.content&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#993333\">&quot;!참가&quot;</span>&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;await&nbsp;msg?.member?.voice?.channel?.join()&nbsp;<span style=\"color:#ff3399\">as</span>&nbsp;VoiceConnection;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;msg.content&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#993333\">&quot;!재생&quot;</span>&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;dispatcher&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;connection.play(path.join(__dirname,&nbsp;<span style=\"color:#993333\">&apos;assets&apos;</span>,&nbsp;<span style=\"color:#993333\">&apos;music.mp3&apos;</span>));</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">[[[CONTENT-ELEMENT-0]]]<br /><font color=\"#9a9a9a\">잘 재생이 되는 것을 확인했습니다.</font><br /><br /></font></div><div><br /></div><div><br /></div><div><br /></div><div><font face=\"Arial\"><span style=\"font-size: 24px;\"><b>&#127911;</b></span></font><b><span style=\"font-size: 18pt;\">&nbsp;실시간 음성 명령어 인식</span></b></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">[[[CONTENT-ELEMENT-7]]]<br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div>Speech To Text (STT) 라고 들어보신 분들이 계실겁니다. 음성 파일에서의 말을 텍스트로 변환시켜주는 기술이죠.</div><div>보통 이것은, 길이가 한정된 음성파일의 내용을 분석하는 것입니다. 하지만 우리는 실시간으로, 언제 말을 할지 언제까지 말을 할지 모르기 때문에 조금 어려움이 있을 수 있습니다.</div><div><br /></div><div>그런데, Discord.JS 에서 훌륭한 기능을 제공하고 있었습니다.</div><div>디스코드에 그게 있잖아요? 설정에 보면 녹음모드 음성감지 말이죠. 이게 봇에도 있었습니다.</div><div>우리는 목소리가 mp3 로 변형되어 나오기를 기대합니다. 하지만 디스코드는 pcm 과 opus 포맷만 지원했습니다.</div><div><br /></div><div><br /></div><div>사실 이후 사용할 STT 엔진이 pcm 도 지원했었으나, mp3 로 변환하여 분석하는 것이 훨씬 뛰어난 수준의 정확도를 보여주었습니다.&nbsp;<span style=\"font-size: 10pt;\">그렇기 때문에 </span><a href=\"https://www.npmjs.com/package/node-lame\" target=\"_blank\" title=\"새창으로 열림\">Lame</a><span style=\"font-size: 10pt;\"> 라는 모듈을 사용하려고 했습니다.</span></div><div><br /></div><div>리눅스 우분투 (데비안) 기준 다음 명령어를 사용합니다.</div><div><br /></div><div><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\">sudo&nbsp;apt&nbsp;install&nbsp;lame</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">npm&nbsp;install&nbsp;node<span style=\"color:#0086b3\"></span><span style=\"color:#ff3399\">-</span>lame</div></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div><br /></div><div><br /></div><div>그리고 다음 코드를 사용해서&nbsp;</div><div><br /></div><div><br /></div><div><br /></div><div><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div><div style=\"line-height:130%\">14</div><div style=\"line-height:130%\">15</div><div style=\"line-height:130%\">16</div><div style=\"line-height:130%\">17</div><div style=\"line-height:130%\">18</div><div style=\"line-height:130%\">19</div><div style=\"line-height:130%\">20</div><div style=\"line-height:130%\">21</div><div style=\"line-height:130%\">22</div><div style=\"line-height:130%\">23</div><div style=\"line-height:130%\">24</div><div style=\"line-height:130%\">25</div><div style=\"line-height:130%\">26</div><div style=\"line-height:130%\">27</div><div style=\"line-height:130%\">28</div><div style=\"line-height:130%\">29</div><div style=\"line-height:130%\">30</div><div style=\"line-height:130%\">31</div><div style=\"line-height:130%\">32</div><div style=\"line-height:130%\">33</div><div style=\"line-height:130%\">34</div><div style=\"line-height:130%\">35</div><div style=\"line-height:130%\">36</div><div style=\"line-height:130%\">37</div><div style=\"line-height:130%\">38</div><div style=\"line-height:130%\">39</div><div style=\"line-height:130%\">40</div><div style=\"line-height:130%\">41</div><div style=\"line-height:130%\">42</div><div style=\"line-height:130%\">43</div><div style=\"line-height:130%\">44</div><div style=\"line-height:130%\">45</div><div style=\"line-height:130%\">46</div><div style=\"line-height:130%\">47</div><div style=\"line-height:130%\">48</div><div style=\"line-height:130%\">49</div><div style=\"line-height:130%\">50</div><div style=\"line-height:130%\">51</div><div style=\"line-height:130%\">52</div><div style=\"line-height:130%\">53</div><div style=\"line-height:130%\">54</div><div style=\"line-height:130%\">55</div><div style=\"line-height:130%\">56</div><div style=\"line-height:130%\">57</div><div style=\"line-height:130%\">58</div><div style=\"line-height:130%\">59</div><div style=\"line-height:130%\">60</div><div style=\"line-height:130%\">61</div><div style=\"line-height:130%\">62</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;Discord&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;discord.js&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;Message,&nbsp;VoiceConnection,&nbsp;VoiceReceiver,&nbsp;User&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;discord.js&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;path&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;path&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;fs&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;fs&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;Lame&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;node-lame&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;Readable&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;stream&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;SILENCE_FRAME&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;Buffer.<span style=\"color:#ff3399\">from</span>([<span style=\"color:#308ce5\">0xF8</span>,&nbsp;<span style=\"color:#308ce5\">0xFF</span>,&nbsp;<span style=\"color:#308ce5\">0xFE</span>]);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">class</span>&nbsp;Slience&nbsp;<span style=\"color:#ff3399\">extends</span>&nbsp;Readable&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;_read()&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.push(SILENCE_FRAME);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.destroy();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;client&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Discord.Client();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">var</span>&nbsp;connection:&nbsp;VoiceConnection;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">var</span>&nbsp;receiver:&nbsp;VoiceReceiver;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">var</span>&nbsp;isRecord:&nbsp;<span style=\"color:#0099cc\">boolean</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#0099cc\">false</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">client.on(<span style=\"color:#993333\">&apos;message&apos;</span>,&nbsp;async&nbsp;(msg:&nbsp;Message)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">!</span>msg.guild&nbsp;)&nbsp;<span style=\"color:#ff3399\">return</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;msg.content&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#993333\">&quot;!참가&quot;</span>&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;await&nbsp;msg?.member?.voice?.channel?.join()&nbsp;<span style=\"color:#ff3399\">as</span>&nbsp;VoiceConnection;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receiver&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;connection?.receiver&nbsp;<span style=\"color:#ff3399\">as</span>&nbsp;VoiceReceiver;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection.play(<span style=\"color:#ff3399\">new</span>&nbsp;Slience(),&nbsp;{&nbsp;<span style=\"color:#ff3399\">type</span>:&nbsp;<span style=\"color:#993333\">&apos;opus&apos;</span>&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection.on(<span style=\"color:#993333\">&apos;speaking&apos;</span>,&nbsp;async&nbsp;(user:&nbsp;User,&nbsp;speaking:&nbsp;<span style=\"color:#0099cc\">boolean</span>)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;speaking&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&amp;</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&amp;</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">!</span>isRecord&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isRecord&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#0099cc\">true</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg?.channel?.send(<span style=\"color:#993333\">&apos;녹음&nbsp;시작&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;date&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Date().getTime();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;audioStream&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;receiver.createStream(user,&nbsp;{&nbsp;mode:&nbsp;<span style=\"color:#993333\">&apos;pcm&apos;</span>&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;pcmBufferChunks:&nbsp;Buffer[]&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;[];&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audioStream.on(<span style=\"color:#993333\">&apos;data&apos;</span>,&nbsp;(d:&nbsp;Buffer)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pcmBufferChunks.push(d);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audioStream.on(<span style=\"color:#993333\">&apos;end&apos;</span>,&nbsp;()&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg.channel.send(<span style=\"color:#993333\">&apos;녹음&nbsp;종료&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isRecord&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#0099cc\">false</span>;&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;pcmBuffer&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;Buffer.concat(pcmBufferChunks);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;encoder&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Lame({</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output:&nbsp;<span style=\"color:#993333\">&apos;./audio-files/&apos;</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">+</span>&nbsp;date&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">+</span>&nbsp;<span style=\"color:#993333\">&apos;.mp3&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bitrate:&nbsp;<span style=\"color:#308ce5\">48</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).setBuffer(pcmBuffer);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encoder.encode()</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(()&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg.channel.send(<span style=\"color:#993333\">&apos;인코딩&nbsp;완료&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style=\"color:#ff3399\">else</span>&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;msg.content&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#993333\">&quot;!해제&quot;</span>)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;msg?.member?.voice?.channel?.leave();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div><br /></div><div><br /></div><div>그래서 디스코드에 참가시키고 말을 하면 녹음한 내용을 mp3 파일로 저장합니다!</div><div><br /></div><div>[[[CONTENT-ELEMENT-8]]]<br /></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">[[[CONTENT-ELEMENT-1]]]<br /><br />목소리가 좋진 않아서 올리기 좀 그렇지만, 실제 녹음됐다는 것을 증명하기 위해 업로드했습니다.</font></div><div><br /></div><div><br /></div><div><br /></div><blockquote><div><span style=\"font-family: Arial; font-size: 14pt;\"><b>Speech To Text</b></span></div></blockquote><div><br /></div><div>[[[CONTENT-ELEMENT-9]]]<br /></div><div><br /></div><div><br /></div><div>이제 서론이 끝나고, 실제로 해봐야 할 Speech To Text 를 사용해 봅시다.</div><div>우리는 언제나 그랬듯 대형 회사인 구글의 기술을 빌려쓸 것입니다.</div><div>구글 speech 는 REST API 를 지원합니다. 자세한 프로젝트 설정은, <a href=\"https://cloud.google.com/speech-to-text/docs/quickstart-client-libraries\" target=\"_blank\" title=\"새창으로 열림\">speech&nbsp;빠른시작 문서</a>와 <a href=\"https://cloud.google.com/speech-to-text/docs/reference/rest/v1p1beta1/speech/recognize\" target=\"_blank\" title=\"새창으로 열림\">speech v1 beta1 api 문서</a>를 보고 제가 이전에 썼었던 <a href=\"https://cafe.naver.com/nameyee/19196\" target=\"_blank\" title=\"새창으로 열림\">자연어 파싱하고 감정분석 하기</a>를 참고하시기 바랍니다.</div><div><br /></div><div><font face=\"Arial\">위에선 mp3 를 파일로 뽑아냈지만, 그것은 직접 확인을 하기 위한 절차일 뿐, 우리는 다시 버퍼로 데이터를 전송할 것이기 때문에 파일로 뽑아내는 것이 아닌 버퍼로 뽑아내는 과정을 거쳤습니다.</font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div><div style=\"line-height:130%\">14</div><div style=\"line-height:130%\">15</div><div style=\"line-height:130%\">16</div><div style=\"line-height:130%\">17</div><div style=\"line-height:130%\">18</div><div style=\"line-height:130%\">19</div><div style=\"line-height:130%\">20</div><div style=\"line-height:130%\">21</div><div style=\"line-height:130%\">22</div><div style=\"line-height:130%\">23</div><div style=\"line-height:130%\">24</div><div style=\"line-height:130%\">25</div><div style=\"line-height:130%\">26</div><div style=\"line-height:130%\">27</div><div style=\"line-height:130%\">28</div><div style=\"line-height:130%\">29</div><div style=\"line-height:130%\">30</div><div style=\"line-height:130%\">31</div><div style=\"line-height:130%\">32</div><div style=\"line-height:130%\">33</div><div style=\"line-height:130%\">34</div><div style=\"line-height:130%\">35</div><div style=\"line-height:130%\">36</div><div style=\"line-height:130%\">37</div><div style=\"line-height:130%\">38</div><div style=\"line-height:130%\">39</div><div style=\"line-height:130%\">40</div><div style=\"line-height:130%\">41</div><div style=\"line-height:130%\">42</div><div style=\"line-height:130%\">43</div><div style=\"line-height:130%\">44</div><div style=\"line-height:130%\">45</div><div style=\"line-height:130%\">46</div><div style=\"line-height:130%\">47</div><div style=\"line-height:130%\">48</div><div style=\"line-height:130%\">49</div><div style=\"line-height:130%\">50</div><div style=\"line-height:130%\">51</div><div style=\"line-height:130%\">52</div><div style=\"line-height:130%\">53</div><div style=\"line-height:130%\">54</div><div style=\"line-height:130%\">55</div><div style=\"line-height:130%\">56</div><div style=\"line-height:130%\">57</div><div style=\"line-height:130%\">58</div><div style=\"line-height:130%\">59</div><div style=\"line-height:130%\">60</div><div style=\"line-height:130%\">61</div><div style=\"line-height:130%\">62</div><div style=\"line-height:130%\">63</div><div style=\"line-height:130%\">64</div><div style=\"line-height:130%\">65</div><div style=\"line-height:130%\">66</div><div style=\"line-height:130%\">67</div><div style=\"line-height:130%\">68</div><div style=\"line-height:130%\">69</div><div style=\"line-height:130%\">70</div><div style=\"line-height:130%\">71</div><div style=\"line-height:130%\">72</div><div style=\"line-height:130%\">73</div><div style=\"line-height:130%\">74</div><div style=\"line-height:130%\">75</div><div style=\"line-height:130%\">76</div><div style=\"line-height:130%\">77</div><div style=\"line-height:130%\">78</div><div style=\"line-height:130%\">79</div><div style=\"line-height:130%\">80</div><div style=\"line-height:130%\">81</div><div style=\"line-height:130%\">82</div><div style=\"line-height:130%\">83</div><div style=\"line-height:130%\">84</div><div style=\"line-height:130%\">85</div><div style=\"line-height:130%\">86</div><div style=\"line-height:130%\">87</div><div style=\"line-height:130%\">88</div><div style=\"line-height:130%\">89</div><div style=\"line-height:130%\">90</div><div style=\"line-height:130%\">91</div><div style=\"line-height:130%\">92</div><div style=\"line-height:130%\">93</div><div style=\"line-height:130%\">94</div><div style=\"line-height:130%\">95</div><div style=\"line-height:130%\">96</div><div style=\"line-height:130%\">97</div><div style=\"line-height:130%\">98</div><div style=\"line-height:130%\">99</div><div style=\"line-height:130%\">100</div><div style=\"line-height:130%\">101</div><div style=\"line-height:130%\">102</div><div style=\"line-height:130%\">103</div><div style=\"line-height:130%\">104</div><div style=\"line-height:130%\">105</div><div style=\"line-height:130%\">106</div><div style=\"line-height:130%\">107</div><div style=\"line-height:130%\">108</div><div style=\"line-height:130%\">109</div><div style=\"line-height:130%\">110</div><div style=\"line-height:130%\">111</div><div style=\"line-height:130%\">112</div><div style=\"line-height:130%\">113</div><div style=\"line-height:130%\">114</div><div style=\"line-height:130%\">115</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;Discord&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;discord.js&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;Message,&nbsp;VoiceConnection,&nbsp;VoiceReceiver,&nbsp;User&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;discord.js&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;path&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;path&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;fs&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;fs&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;Lame&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;node-lame&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;Readable&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;stream&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;axios&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;axios&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;AxiosRequestConfig&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;axios&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#999999\">//&nbsp;API&nbsp;Key&nbsp;를&nbsp;global&nbsp;객체에&nbsp;선언하기&nbsp;위한&nbsp;타입&nbsp;재정의.</span></div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">declare</span>&nbsp;global&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">namespace</span>&nbsp;NodeJS&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">interface</span>&nbsp;Global&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apiKey:&nbsp;<span style=\"color:#0099cc\">string</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;SILENCE_FRAME&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;Buffer.<span style=\"color:#ff3399\">from</span>([<span style=\"color:#308ce5\">0xF8</span>,&nbsp;<span style=\"color:#308ce5\">0xFF</span>,&nbsp;<span style=\"color:#308ce5\">0xFE</span>]);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">class</span>&nbsp;Slience&nbsp;<span style=\"color:#ff3399\">extends</span>&nbsp;Readable&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;_read()&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.push(SILENCE_FRAME);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.destroy();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;client&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Discord.Client();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">var</span>&nbsp;connection:&nbsp;VoiceConnection;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">var</span>&nbsp;receiver:&nbsp;VoiceReceiver;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">var</span>&nbsp;isRecord:&nbsp;<span style=\"color:#0099cc\">boolean</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#0099cc\">false</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">client.on(<span style=\"color:#993333\">&apos;message&apos;</span>,&nbsp;async&nbsp;(msg:&nbsp;Message)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">!</span>msg.guild&nbsp;)&nbsp;<span style=\"color:#ff3399\">return</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;msg.content&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#993333\">&quot;!참가&quot;</span>&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;await&nbsp;msg?.member?.voice?.channel?.join()&nbsp;<span style=\"color:#ff3399\">as</span>&nbsp;VoiceConnection;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receiver&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;connection?.receiver&nbsp;<span style=\"color:#ff3399\">as</span>&nbsp;VoiceReceiver;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection.play(<span style=\"color:#ff3399\">new</span>&nbsp;Slience(),&nbsp;{&nbsp;<span style=\"color:#ff3399\">type</span>:&nbsp;<span style=\"color:#993333\">&apos;opus&apos;</span>&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection.on(<span style=\"color:#993333\">&apos;speaking&apos;</span>,&nbsp;async&nbsp;(user:&nbsp;User,&nbsp;speaking:&nbsp;<span style=\"color:#0099cc\">boolean</span>)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;speaking&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&amp;</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&amp;</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">!</span>isRecord&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isRecord&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#0099cc\">true</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg?.channel?.send(<span style=\"color:#993333\">&apos;녹음&nbsp;시작&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;date&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Date().getTime();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;audioStream&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;receiver.createStream(user,&nbsp;{&nbsp;mode:&nbsp;<span style=\"color:#993333\">&apos;pcm&apos;</span>&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;pcmBufferChunks:&nbsp;Buffer[]&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;[];</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audioStream.on(<span style=\"color:#993333\">&apos;data&apos;</span>,&nbsp;(d:&nbsp;Buffer)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pcmBufferChunks.push(d);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audioStream.on(<span style=\"color:#993333\">&apos;end&apos;</span>,&nbsp;async&nbsp;()&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg.channel.send(<span style=\"color:#993333\">&apos;녹음&nbsp;종료&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isRecord&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#0099cc\">false</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;pcmBuffer:&nbsp;Buffer&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;Buffer.concat(pcmBufferChunks);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;encoder&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Lame({</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output:&nbsp;<span style=\"color:#993333\">&apos;buffer&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bitrate:&nbsp;<span style=\"color:#308ce5\">48</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).setBuffer(pcmBuffer);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;encoder.encode();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg.channel.send(<span style=\"color:#993333\">&apos;인코딩&nbsp;완료&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;mp3Buffer&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;encoder.getBuffer();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;audio&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:&nbsp;mp3Buffer.toString(<span style=\"color:#993333\">&apos;base64&apos;</span>),</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;config&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encoding:&nbsp;<span style=\"color:#993333\">&apos;MP3&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sampleRateHertz:&nbsp;<span style=\"color:#308ce5\">48000</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;languageCode:&nbsp;<span style=\"color:#993333\">&apos;ko-KR&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;request:&nbsp;AxiosRequestConfig&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;<span style=\"color:#993333\">&apos;<a href=\"https://speech.googleapis.com/v1p1beta1/speech:recognize\" target=\"_blank\">https://speech.googleapis.com/v1p1beta1/speech:recognize</a>&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;<span style=\"color:#993333\">&apos;post&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params:&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alt:&nbsp;<span style=\"color:#993333\">&apos;json&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;global.apiKey,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audio,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg.channel.send(<span style=\"color:#993333\">&quot;분석&nbsp;시작&quot;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">try</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;res&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;await&nbsp;axios(request);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;{&nbsp;results&nbsp;}&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;res.data;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;scriptArr:&nbsp;<span style=\"color:#0099cc\">string</span>[]&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;[];</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;results&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">for</span>&nbsp;(&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;result&nbsp;<span style=\"color:#ff3399\">of</span>&nbsp;results&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptArr.push(result.alternatives[<span style=\"color:#308ce5\">0</span>].transcript);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;transcription&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;scriptArr.join(<span style=\"color:#993333\">&apos;\\n&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg.channel.send(<span style=\"color:#993333\">&apos;분석&nbsp;결과:&nbsp;&apos;</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">+</span>&nbsp;transcription);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style=\"color:#ff3399\">catch</span>(err)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(err);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style=\"color:#ff3399\">else</span>&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;msg.content&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#993333\">&quot;!해제&quot;</span>)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;msg?.member?.voice?.channel?.leave();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">[[[CONTENT-ELEMENT-10]]]<br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><br /></div><div><font face=\"Arial\"><br /></font></div><blockquote><div><span style=\"font-family: Arial; font-size: 14pt;\"><b>자연어 분석</b></span></div></blockquote><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">사실, 자연어 분석에 대한 내용은 이미 저번에 진행했었습니다. 이번에도 별 다를 것이 없습니다.</font></div><div><font face=\"Arial\">실제 NLP 는 더 이후에 다룰 예정이니, 제가 이번에 사용할 내용을 자세히 보고 싶으시다면 아래 게시글을 참고해 보세요.</font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><a href=\"https://cafe.naver.com/nameyee/19295\" target=\"_blank\">https://cafe.naver.com/nameyee/19295</a></font></div><div><font face=\"Arial\"><br /></font></div><div><br /></div><div><font face=\"Arial\">근데, 제가 봇을 호출할 때는 거를 것이 없기 때문에 위 모듈을 사용하는 것이 아닌</font></div><div><font face=\"Arial\">단순한 정규식 처리를 하도록 하겠습니다.</font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;transcription.match(<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">/</span>안녕\\s<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">*</span>나라야<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">/</span>)&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;msg.channel.send(<span style=\"color:#993333\">&quot;호출&quot;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">아까 코드에 위 세줄 추가한 것이 끝입니다.</font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">[[[CONTENT-ELEMENT-11]]]<br /></font></div><div><br /></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\">좀 부족한 것 같아도 잘 동작합니다.</font></div><div>시동어는 &quot;안녕 나라야&quot; 입니다.</div><div>하이 빅스비, 시리야, 오케이 구글 같은 것이죠.</div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><font face=\"Arial\"><br /></font></div><div><span style=\"font-size: 18pt; font-family: Arial;\">&#128221;&nbsp;</span><b><span style=\"font-size: 18pt;\">유한 오토마톤으로 상태 관리</span></b></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\">유한 오토마톤 또는 유한 상태 기계라고 불리는 FSM(Finite State Machine) 기술은, 프로그램이 특정 유일한 상태값을 가진다 가정하고 각 상태별 동작과 처리에 대한 내용을 설계하는 것입니다.</div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\">이는 지금도 사용되는지 모르겠지만, 한 때 게임의 A.I 에 자주 사용되는 기술이었습니다.</div><div style=\"font-size: 13.3333px;\">원래는 제가 사용하던 방식대로 하려 했으나, C 언어가 아닌 것을 알고 EventEmiit 를 사용하도록 하겠습니다.</div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div><div style=\"line-height:130%\">14</div><div style=\"line-height:130%\">15</div><div style=\"line-height:130%\">16</div><div style=\"line-height:130%\">17</div><div style=\"line-height:130%\">18</div><div style=\"line-height:130%\">19</div><div style=\"line-height:130%\">20</div><div style=\"line-height:130%\">21</div><div style=\"line-height:130%\">22</div><div style=\"line-height:130%\">23</div><div style=\"line-height:130%\">24</div><div style=\"line-height:130%\">25</div><div style=\"line-height:130%\">26</div><div style=\"line-height:130%\">27</div><div style=\"line-height:130%\">28</div><div style=\"line-height:130%\">29</div><div style=\"line-height:130%\">30</div><div style=\"line-height:130%\">31</div><div style=\"line-height:130%\">32</div><div style=\"line-height:130%\">33</div><div style=\"line-height:130%\">34</div><div style=\"line-height:130%\">35</div><div style=\"line-height:130%\">36</div><div style=\"line-height:130%\">37</div><div style=\"line-height:130%\">38</div><div style=\"line-height:130%\">39</div><div style=\"line-height:130%\">40</div><div style=\"line-height:130%\">41</div><div style=\"line-height:130%\">42</div><div style=\"line-height:130%\">43</div><div style=\"line-height:130%\">44</div><div style=\"line-height:130%\">45</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;{&nbsp;EventEmitter&nbsp;}&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;events&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">export</span>&nbsp;<span style=\"color:#0099cc\">enum</span>&nbsp;FSM_STATUS&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;NONE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#308ce5\">0</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;PENDING&nbsp;&nbsp;&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#308ce5\">0x1</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;CALLED&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#308ce5\">0x2</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;COMMAND&nbsp;&nbsp;&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#308ce5\">0x4</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;psleep&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;async&nbsp;(msec:&nbsp;<span style=\"color:#0099cc\">number</span>)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">return</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Promise((resolve,&nbsp;reject)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(resolve,&nbsp;msec);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">export</span>&nbsp;<span style=\"color:#ff3399\">class</span>&nbsp;FSM&nbsp;<span style=\"color:#ff3399\">extends</span>&nbsp;EventEmitter&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">public</span>&nbsp;before:&nbsp;FSM_STATUS&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;FSM_STATUS.NONE;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">public</span>&nbsp;now:&nbsp;FSM_STATUS&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;FSM_STATUS.NONE;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">constructor</span>()&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">super</span>();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.before&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;FSM_STATUS.PENDING;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">public</span>&nbsp;change(status:&nbsp;FSM_STATUS,&nbsp;...args)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.before&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">this</span>.now;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.now&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;status;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.emit(<span style=\"color:#993333\">&apos;status-&apos;</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">+</span>&nbsp;(status&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">|</span>&nbsp;<span style=\"color:#ff3399\">this</span>.before),&nbsp;...args);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">public</span>&nbsp;status(now:&nbsp;FSM_STATUS,&nbsp;before:&nbsp;FSM_STATUS,&nbsp;callback:&nbsp;Function)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">this</span>.on(<span style=\"color:#993333\">&apos;status-&apos;</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">+</span>&nbsp;(now&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">|</span>&nbsp;before),&nbsp;callback&nbsp;<span style=\"color:#ff3399\">as</span>&nbsp;<span style=\"color:#0099cc\">any</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;fsm&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;FSM();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">global.fsm&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;fsm;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">fsm.status(FSM_STATUS.CALLED,&nbsp;FSM_STATUS.PENDING,&nbsp;async&nbsp;()&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span style=\"color:#993333\">&quot;CALLED&quot;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">fsm.status(FSM_STATUS.COMMAND,&nbsp;FSM_STATUS.CALLED,&nbsp;async&nbsp;(res)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;fsm.change(FSM_STATUS.PENDING);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span style=\"color:#993333\">&quot;COMMAND&quot;</span>,&nbsp;res.answer,&nbsp;res.cmd);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">이런식으로 FSM 상태를 관리하는 파일을 따로 만들었습니다.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">그럼, 저것들은 이제 누가 호출할 것이냐? 당연히 녹음된 음석을 분석한 결과를 가지고 호출을 해야겠죠.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div><div style=\"line-height:130%\">14</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\">...</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">msg.channel.send(<span style=\"color:#993333\">&apos;분석&nbsp;결과:&nbsp;&apos;</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">+</span>&nbsp;transcription);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;transcription.trim()&nbsp;)&nbsp;{&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;transcription.match(<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">/</span>안녕\\s<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">*</span>나라야<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">/</span>)&nbsp;)&nbsp;{&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global.fsm.change(FSM_STATUS.CALLED);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style=\"color:#ff3399\">else</span>&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;global.fsm.now&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;FSM_STATUS.CALLED&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;res&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;Indent(transcription);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global.fsm.change(FSM_STATUS.COMMAND,&nbsp;res);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">...</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><span style=\"font-family: Arial;\">위와 같이 말입니다. 그리고, 더 위에 보면 fsm.status 를 CALLED -&gt; COMMAND 로 갔을 때만 반응하게 해뒀습니다.</span></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><span style=\"font-family: Arial;\">그러니 먼저 호출되지 않으면 어떤 말을 해도 무시하게 될것입니다. 자연어 처리는 다음과 같습니다.</span></font></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div><div style=\"line-height:130%\">14</div><div style=\"line-height:130%\">15</div><div style=\"line-height:130%\">16</div><div style=\"line-height:130%\">17</div><div style=\"line-height:130%\">18</div><div style=\"line-height:130%\">19</div><div style=\"line-height:130%\">20</div><div style=\"line-height:130%\">21</div><div style=\"line-height:130%\">22</div><div style=\"line-height:130%\">23</div><div style=\"line-height:130%\">24</div><div style=\"line-height:130%\">25</div><div style=\"line-height:130%\">26</div><div style=\"line-height:130%\">27</div><div style=\"line-height:130%\">28</div><div style=\"line-height:130%\">29</div><div style=\"line-height:130%\">30</div><div style=\"line-height:130%\">31</div><div style=\"line-height:130%\">32</div><div style=\"line-height:130%\">33</div><div style=\"line-height:130%\">34</div><div style=\"line-height:130%\">35</div><div style=\"line-height:130%\">36</div><div style=\"line-height:130%\">37</div><div style=\"line-height:130%\">38</div><div style=\"line-height:130%\">39</div><div style=\"line-height:130%\">40</div><div style=\"line-height:130%\">41</div><div style=\"line-height:130%\">42</div><div style=\"line-height:130%\">43</div><div style=\"line-height:130%\">44</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\">...</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;indentList:&nbsp;Indent[]&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;[</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;key&quot;</span>:&nbsp;<span style=\"color:#993333\">&quot;music&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;pos&quot;</span>:&nbsp;<span style=\"color:#993333\">&quot;subject&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;indent&quot;</span>:&nbsp;[<span style=\"color:#993333\">&quot;노래&quot;</span>,&nbsp;<span style=\"color:#993333\">&quot;음악&quot;</span>,&nbsp;<span style=\"color:#993333\">&quot;뮤직&quot;</span>],</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;sub-indent&quot;</span>:&nbsp;[</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;key&quot;</span>:&nbsp;<span style=\"color:#993333\">&quot;play&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;pos&quot;</span>:&nbsp;<span style=\"color:#993333\">&quot;doit&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;indent&quot;</span>:&nbsp;[&nbsp;<span style=\"color:#993333\">&quot;틀어\\\\S*&quot;</span>,&nbsp;<span style=\"color:#993333\">&quot;재생\\\\S*&quot;</span>&nbsp;],</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;finish&quot;</span>:&nbsp;<span style=\"color:#0099cc\">true</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;},</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">];</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">...</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;answerList:&nbsp;Answer[]&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;[</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;key&quot;</span>:&nbsp;<span style=\"color:#993333\">&quot;music&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;sub-answer&quot;</span>:&nbsp;[</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;key&quot;</span>:&nbsp;<span style=\"color:#993333\">&quot;play&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;answer&quot;</span>:&nbsp;<span style=\"color:#993333\">&quot;네.&nbsp;노래를&nbsp;재생해&nbsp;드릴게요&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&quot;cmd&quot;</span>:&nbsp;<span style=\"color:#993333\">&quot;music.play&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span style=\"color:#999999\">//&nbsp;save</span></div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">];</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">...</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">export</span>&nbsp;<span style=\"color:#ff3399\">default</span>&nbsp;(txt:&nbsp;<span style=\"color:#0099cc\">string</span>)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;deep&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;searchIndent(txt);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;answer&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;searchAnswer(deep);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">return</span>&nbsp;answer;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">그리고 이전엔, Indent 함수를 실행하게 되면 무조건 답변 문장만 나왔었는데, cmd 와 답변을 같이 주도록 하였습니다.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><span style=\"font-family: Arial;\"><br /></span></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><span style=\"font-family: Arial; font-size: 14.6667px;\"><b><span style=\"font-size: 18pt;\">&#127908;</span></b></span><span style=\"font-family: Arial; font-size: 11pt;\"><b><span style=\"font-size: 18pt;\">&nbsp;명령어 답변 음성으로 재생</span></b></span></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">[[[CONTENT-ELEMENT-12]]]<br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\">빅스비! 시리! 인공지능 비서!</div><div style=\"font-size: 13.3333px;\">다들 예쁜 목소리를 가지고 있습니다. 그러니 우리의 김밥나라 비서님도 예쁜 목소리를 가져야 합니다.</div><div style=\"font-size: 13.3333px;\">보통의 TTS 엔진으로는 그렇게 예쁜 목소리가 나오질 않거든요.</div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\">그래서 준비한 것이, 네이버 클라우드의 프리미엄 보이스입니다.</div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\">[[[CONTENT-ELEMENT-13]]]<br /></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">제가 여러 TTS를 써본 결과, 이 목소리가 가장 자연스럽고 예뻤습니다. 심지어 파파고의 규리보다 더 예쁜 목소리가 나왔습니다.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">하지만 이것은 유료입니다. 때문에 매번 새로 호출해버리면 요금이 어마어마하게 나올 것 같습니다.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">그러니 한 번 요청했던 TTS 음성은, 저장해두고 재사용하는 것이 이득인 것 같습니다.</font></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div><div style=\"line-height:130%\">14</div><div style=\"line-height:130%\">15</div><div style=\"line-height:130%\">16</div><div style=\"line-height:130%\">17</div><div style=\"line-height:130%\">18</div><div style=\"line-height:130%\">19</div><div style=\"line-height:130%\">20</div><div style=\"line-height:130%\">21</div><div style=\"line-height:130%\">22</div><div style=\"line-height:130%\">23</div><div style=\"line-height:130%\">24</div><div style=\"line-height:130%\">25</div><div style=\"line-height:130%\">26</div><div style=\"line-height:130%\">27</div><div style=\"line-height:130%\">28</div><div style=\"line-height:130%\">29</div><div style=\"line-height:130%\">30</div><div style=\"line-height:130%\">31</div><div style=\"line-height:130%\">32</div><div style=\"line-height:130%\">33</div><div style=\"line-height:130%\">34</div><div style=\"line-height:130%\">35</div><div style=\"line-height:130%\">36</div><div style=\"line-height:130%\">37</div><div style=\"line-height:130%\">38</div><div style=\"line-height:130%\">39</div><div style=\"line-height:130%\">40</div><div style=\"line-height:130%\">41</div><div style=\"line-height:130%\">42</div><div style=\"line-height:130%\">43</div><div style=\"line-height:130%\">44</div><div style=\"line-height:130%\">45</div><div style=\"line-height:130%\">46</div><div style=\"line-height:130%\">47</div><div style=\"line-height:130%\">48</div><div style=\"line-height:130%\">49</div><div style=\"line-height:130%\">50</div><div style=\"line-height:130%\">51</div><div style=\"line-height:130%\">52</div><div style=\"line-height:130%\">53</div><div style=\"line-height:130%\">54</div><div style=\"line-height:130%\">55</div><div style=\"line-height:130%\">56</div><div style=\"line-height:130%\">57</div><div style=\"line-height:130%\">58</div><div style=\"line-height:130%\">59</div><div style=\"line-height:130%\">60</div><div style=\"line-height:130%\">61</div><div style=\"line-height:130%\">62</div><div style=\"line-height:130%\">63</div><div style=\"line-height:130%\">64</div><div style=\"line-height:130%\">65</div><div style=\"line-height:130%\">66</div><div style=\"line-height:130%\">67</div><div style=\"line-height:130%\">68</div><div style=\"line-height:130%\">69</div><div style=\"line-height:130%\">70</div><div style=\"line-height:130%\">71</div><div style=\"line-height:130%\">72</div><div style=\"line-height:130%\">73</div><div style=\"line-height:130%\">74</div><div style=\"line-height:130%\">75</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#999999\">//&nbsp;native&nbsp;modules</span></div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;fs&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;fs&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;path&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;path&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#999999\">//&nbsp;package&nbsp;modules</span></div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">import</span>&nbsp;httpReq&nbsp;<span style=\"color:#ff3399\">from</span>&nbsp;<span style=\"color:#993333\">&apos;request&apos;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;getPath&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;(p:&nbsp;<span style=\"color:#0099cc\">string</span>)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;path.join(process.cwd(),&nbsp;p);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;tts&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">require</span>(getPath(<span style=\"color:#993333\">&apos;./tts.json&apos;</span>));</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;ttsRequest&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;(txt:&nbsp;<span style=\"color:#0099cc\">string</span>)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">return</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Promise((resolve,&nbsp;reject)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;options&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;<span style=\"color:#993333\">&apos;<a href=\"https://naveropenapi.apigw.ntruss.com/voice-premium/v1/tts\" target=\"_blank\">https://naveropenapi.apigw.ntruss.com/voice-premium/v1/tts</a>&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;<span style=\"color:#993333\">&apos;post&apos;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form:&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;speaker:&nbsp;<span style=\"color:#993333\">&quot;nara&quot;</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;speed:&nbsp;<span style=\"color:#308ce5\">0</span>,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text:&nbsp;txt,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers:&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&apos;X-NCP-APIGW-API-KEY-ID&apos;</span>:&nbsp;global.naraId,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#993333\">&apos;X-NCP-APIGW-API-KEY&apos;</span>:&nbsp;global.naraKey,</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;date&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;Date.now();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;fname&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;getPath(<span style=\"color:#993333\">&apos;audio-files/&apos;</span>&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">+</span>&nbsp;date&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">+</span>&nbsp;<span style=\"color:#993333\">&apos;.mp3&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;writeable&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;fs.createWriteStream(fname);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">try</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;req&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;httpReq(options,&nbsp;(err)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;err&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(err);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;req.pipe(writeable);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style=\"color:#ff3399\">catch</span>(err)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(err);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writeable.on(<span style=\"color:#993333\">&apos;close&apos;</span>,&nbsp;()&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(fname);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;say&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;(fname:&nbsp;<span style=\"color:#0099cc\">string</span>)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">return</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;Promise((resolve,&nbsp;reject)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">try</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">const</span>&nbsp;dispatcher&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;global.connection.play(fname);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dispatcher.on(<span style=\"color:#993333\">&apos;finish&apos;</span>,&nbsp;()&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style=\"color:#ff3399\">catch</span>(err)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(err);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">export</span>&nbsp;<span style=\"color:#ff3399\">default</span>&nbsp;async&nbsp;(txt:&nbsp;<span style=\"color:#0099cc\">string</span>)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">let</span>&nbsp;fname&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#993333\">&quot;&quot;</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">if</span>&nbsp;(&nbsp;tts[txt]&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fname&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;tts[txt];</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style=\"color:#ff3399\">else</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#999999\">//&nbsp;새로운&nbsp;요청</span></div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fname&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;await&nbsp;ttsRequest(txt)&nbsp;<span style=\"color:#ff3399\">as</span>&nbsp;<span style=\"color:#0099cc\">string</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tts[txt]&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;fname;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fs.writeFile(getPath(<span style=\"color:#993333\">&apos;./tts.json&apos;</span>),&nbsp;JSON.stringify(tts,&nbsp;<span style=\"color:#0099cc\">null</span>,&nbsp;<span style=\"color:#993333\">&apos;\\t&apos;</span>),&nbsp;{&nbsp;encoding:&nbsp;<span style=\"color:#993333\">&apos;utf8&apos;</span>&nbsp;},&nbsp;()&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">return</span>&nbsp;say(fname);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">axios 모듈을 놔두고 지금은 사용되지 않는 request 모듈을 사용한 이유는, 이전 작업을 할 때 axios 모듈을 사용해서 해결해 보려고 했었던 경험이 있거니와 다른 프로젝트 코드의 재사용 때문입니다.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">어쨌든, tts.json 에 음성 파일이 있으면 해당 파일을 재생하고, 없으면 새로운 tts 를 요청해 파일을 생성 후 재생합니다.</font></div><div style=\"font-size: 13.3333px;\">최종적인 FSM 은 다음과 같습니다.</div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><br /></div><div style=\"font-size: 13.3333px;\"><div class=\"colorscripter-code\"><table><tbody><tr><td><div style=\"margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"line-height:130%\">1</div><div style=\"line-height:130%\">2</div><div style=\"line-height:130%\">3</div><div style=\"line-height:130%\">4</div><div style=\"line-height:130%\">5</div><div style=\"line-height:130%\">6</div><div style=\"line-height:130%\">7</div><div style=\"line-height:130%\">8</div><div style=\"line-height:130%\">9</div><div style=\"line-height:130%\">10</div><div style=\"line-height:130%\">11</div><div style=\"line-height:130%\">12</div><div style=\"line-height:130%\">13</div><div style=\"line-height:130%\">14</div><div style=\"line-height:130%\">15</div><div style=\"line-height:130%\">16</div><div style=\"line-height:130%\">17</div><div style=\"line-height:130%\">18</div><div style=\"line-height:130%\">19</div><div style=\"line-height:130%\">20</div></div></td><td><div style=\"margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%\"><div style=\"padding:0 6px; white-space:pre; line-height:130%\">...</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\"><span style=\"color:#ff3399\">const</span>&nbsp;fsm&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;<span style=\"color:#ff3399\">new</span>&nbsp;FSM();</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">global.fsm&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span>&nbsp;fsm;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">fsm.status(FSM_STATUS.CALLED,&nbsp;FSM_STATUS.PENDING,&nbsp;async&nbsp;()&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;Read(<span style=\"color:#993333\">&apos;부르셨나요?&apos;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;console.log(<span style=\"color:#993333\">&quot;CALLED&quot;</span>);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">});</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">fsm.status(FSM_STATUS.COMMAND,&nbsp;FSM_STATUS.CALLED,&nbsp;async&nbsp;(res)&nbsp;<span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">=</span><span style=\"color:#039C43\"></span><span style=\"color:#ff3399\">&gt;</span>&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;fsm.change(FSM_STATUS.PENDING);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;Read(res.answer);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">switch</span>&nbsp;(&nbsp;res.cmd&nbsp;)&nbsp;{</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">case</span>&nbsp;<span style=\"color:#993333\">&quot;music.play&quot;</span>:</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global.connection.play(</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path.join(process.cwd(),&nbsp;<span style=\"color:#993333\">&apos;music.mp3&apos;</span>)</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#ff3399\">break</span>;</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style=\"padding:0 6px; white-space:pre; line-height:130%\">});</div></div><div style=\"text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic\"><a href=\"http://colorscripter.com/info#e\" target=\"_blank\">Colored by Color Scripter</a></div></td><td><a href=\"http://colorscripter.com/info#e\" target=\"_blank\"><span style=\"font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;\">cs</span></a></td></tr></tbody></table></div></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">그럼, 제대로 동작하는지 확인해 보아야겠죠.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">[[[CONTENT-ELEMENT-2]]]<br /><br /><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">정상 동작하는 것을 확인했습니다!</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">이번 프로젝트는 깃허브에 올려두었습니다. 전체 소스가 궁금하신 분들은 참고하세요.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><a href=\"https://github.com/Tree-Some/discord-speech-bot\" target=\"_blank\">https://github.com/Tree-Some/discord-speech-bot</a></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">이상, 인공지능 비서를 만들어 본 챗봇 입문자 윤이였습니다.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\">읽어주셔서 감사합니다.</font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div><div style=\"font-size: 13.3333px;\"><font face=\"Arial\"><br /></font></div>",
            "decorator": {
                "isPlug": false,
                "isShowSuicideSaver": false
            },
            "existScrapAddContent": false,
            "gdid": "90000004_01C2B33B00004E6D00000000",
            "id": 20077,
            "isAutoSourcing": false,
            "isBlind": false,
            "isDeleteParent": false,
            "isEnableExternal": true,
            "isEnableScrap": true,
            "isEnableSocialPlugin": true,
            "isGroupPurchase": false,
            "isMarket": false,
            "isNewComment": false,
            "isNotice": false,
            "isOpen": true,
            "isPersonalTrade": false,
            "isReadable": true,
            "isWriteComment": true,
            "menu": {
                "badMenu": false,
                "badMenuByRestrict": false,
                "boardType": "L",
                "id": 1,
                "menuType": "B",
                "name": "| 자유 게시판 |"
            },
            "readCount": 663,
            "refArticleId": 20077,
            "replyListOrder": "",
            "scrapCount": 1,
            "subject": "[스압] 디코 코인 탑승해서 음성인식 및 목소리가 있는 비서 만들기",
            "template": {
                "isUse": false
            },
            "writeDate": 1592738375630,
            "writer": {
                "id": "ifthe1201",
                "image": {
                    "isAnimated": false,
                    "service": "BLOG",
                    "type": "c77_77",
                    "url": "https://blogpfthumb-phinf.pstatic.net/MjAyMDA3MTBfNzYg/MDAxNTk0MzQ0ODU1NTQ2.yMeR8-E78VjjzqeGOQo6OGr0sojinj5Dir7Ji_HIy4sg.li_e14s0igjSliOLSzii9fiomrURQFUCzAMWcKfSkvIg.PNG.ifthe1201/fox.png"
                },
                "memberLevelIconUrl": "https://cafe.pstatic.net/levelicon/1/13_1.gif",
                "memberLevelName": "챗봇 입문자",
                "nick": "윤"
            }
        },
        "articleId": 20077,
        "attaches": [
            {
                "extension": "jpg",
                "fullName": "09263298-b299-11ea-96e3-48df37269fd0_05.jpg",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "09263298-b299-1...f37269fd0_05.jpg",
                "size": 581099,
                "suspendLayerName": "block_common",
                "type": "M",
                "url": "https://blogattach.naver.net/9a0f8630221110a5886c0b3005e09fe04012ec18/cafe_2020_06_20_204/09263298-b299-11ea-96e3-48df37269fd0_05.jpg?type=attachment"
            },
            {
                "extension": "jpg",
                "fullName": "4f03059c-b368-11ea-ae69-48df37269ee2_05.jpg",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "4f03059c-b368-1...f37269ee2_05.jpg",
                "size": 155076,
                "suspendLayerName": "block_common",
                "type": "M",
                "url": "https://blogattach.naver.net/d247ce7d6f3736eac620457245abd2ae085aa44683/cafe_2020_06_21_1444/4f03059c-b368-11ea-ae69-48df37269ee2_05.jpg?type=attachment"
            },
            {
                "extension": "jpg",
                "fullName": "79a6ecf5-b3b0-11ea-96e3-48df37269fd0_05.jpg",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "79a6ecf5-b3b0-1...f37269fd0_05.jpg",
                "size": 833080,
                "suspendLayerName": "block_common",
                "type": "M",
                "url": "https://blogattach.naver.net/9c098036221716a38e6a0d3603e699e64614ea34/cafe_2020_06_21_102/79a6ecf5-b3b0-11ea-96e3-48df37269fd0_05.jpg?type=attachment"
            },
            {
                "extension": "gif",
                "fullName": "giphy_(13).gif",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "giphy_(13).gif",
                "size": 958428,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/13860fbca8f3f72b07e184b3846a136fc99b658700/MjAyMDA2MjBfNTUg/MDAxNTkyNjE0ODgyNDIw.T04OOfL4X7PanQYzq3lyt-3PkQIEIiHpzBemcLZX4VEg.BN2a3irxZRPIzOHm1zjHOossGcCK1WS6rj4LBnpbJy0g.GIF/giphy_(13).gif?type=attachment"
            },
            {
                "extension": "png",
                "fullName": "이미지_2.png",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "이미지_2.png",
                "size": 11413,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/4adf56e6f2adae725eb8ddeadd334a3690c23cdefd/MjAyMDA2MjBfMjY5/MDAxNTkyNjE2ODY5Njg2.IpaSct0a4fsmgAIytCtURoPCibymsc75rGTJFDq_2D8g.iB7zpiJ39x7VlVU5oGSmiWxmxrr4a0w3RB-rQ2Q4WMog.PNG/이미지_2.png?type=attachment"
            },
            {
                "extension": "png",
                "fullName": "이미지_3.png",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "이미지_3.png",
                "size": 31871,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/7eeb62d2c39b9a466a8ce9dee9077e02a4f608ea94/MjAyMDA2MjBfMzEg/MDAxNTkyNjE3NDE3Mjkz.mLHHnZhuzOIfcdHgwpuX77tr3-s8TeX3uvVupa9qgr4g.HMONP8gzvg9MizgS9tkJhUPHvZ184O1rAm-b-psFzTcg.PNG/이미지_3.png?type=attachment"
            },
            {
                "extension": "gif",
                "fullName": "giphy_(14).gif",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "giphy_(14).gif",
                "size": 554566,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/68fd74c4d78f8c507c9affc8ff116814b2e01efcf4/MjAyMDA2MjBfMjA4/MDAxNTkyNjE4NDIyNTc5.b94UNkYnuQHVBfx7wCoNDf_7AvTjQhJwEapeV15lCVUg.BBwtkYcTUvyTUuWlUlRPm33NEuDtUy-dfomUaWpoKbMg.GIF/giphy_(14).gif?type=attachment"
            },
            {
                "extension": "png",
                "fullName": "이미지_6.png",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "이미지_6.png",
                "size": 10808,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/cb5ed764742b2ff3df395c6b5cb2cbb71143bd5f04/MjAyMDA2MjFfNjIg/MDAxNTkyNzA3MDExMTQ2.QBOS7nxU1bIQysEcy6qkm02fuIuRxLEQyyooQw2c_vEg.09hJlbU9OjGh57nQW9OHhq-K8KkmAqaoGDFNGA-hWQ0g.PNG/이미지_6.png?type=attachment"
            },
            {
                "extension": "png",
                "fullName": "speech-api-lead.png",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "speech-api-lead.png",
                "size": 4325,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/07921ba8bde5e33f13f590a7907e077bdd8f71935f/MjAyMDA2MjFfMTQy/MDAxNTkyNzA3Mjc4NzIx.um5Oa8QiIYMdE4lYWKE4E5IWPrBUxrvBHHEbCZ6a8F4g.RqEuMqTXPki6OEn2VlD__rjTvwA1TjqWn5isEKOrG-gg.PNG/speech-api-lead.png?type=attachment"
            },
            {
                "extension": "png",
                "fullName": "이미지_9.png",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "이미지_9.png",
                "size": 16185,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/059019aabfe9e13d11f792a5927c0579df8d739159/MjAyMDA2MjFfMjY4/MDAxNTkyNzI1NzE1OTYw.vjk04_m3BHesDi5w2U7uuCoznnl0KQsSU5TcpWXJXCkg.3CqtyirrS_JpiQsJiz3Jh4IPW4IgKxBqeBWSnCpAMLUg.PNG/이미지_9.png?type=attachment"
            },
            {
                "extension": "png",
                "fullName": "이미지_10.png",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "이미지_10.png",
                "size": 20746,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/b326af1961563e8aa54328112fccb0c9693b59/MjAyMDA2MjFfMTEy/MDAxNTkyNzI2MjI3OTE1.cGWy8UdxEYxbwsVvNKd40DNAZ2xOtZRyG6GkWKGUm8Eg.Erqn3YGXbWU2mncVfReHnlyHpjg97HVtwE9a8C7v1jog.PNG/이미지_10.png?type=attachment"
            },
            {
                "extension": "gif",
                "fullName": "giphy_(15).gif",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "giphy_(15).gif",
                "size": 6166176,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/a83db40514232297ba5e390237d2add27220ded9/MjAyMDA2MjFfMTY4/MDAxNTkyNzM1OTI0NzU4.wKQs11wpz3zraINypof23SZLCJuhCm2tmLq5a0MJptcg.hjhx0z8gjUy7uGhtJelQooFDDoX5GB3udwsKagT0edog.GIF/giphy_(15).gif?type=attachment"
            },
            {
                "extension": "png",
                "fullName": "이미지_11.png",
                "hasCopyrightIssue": false,
                "hasLicenseIssue": false,
                "isBlind": false,
                "isInfected": false,
                "name": "이미지_11.png",
                "size": 109576,
                "suspendLayerName": "block_common",
                "type": "I",
                "url": "https://blogattach.naver.net/db4ec77466373fe3cf294c7b4ca2dba70153ad4fa2/MjAyMDA2MjFfNzUg/MDAxNTkyNzM2MTA3MTkz.LHulrtwK572onpJNS7-dWEQscHYSHBAOMyzyw286M9wg.9fSULrFFQiMQWyHOg4FvfzmAGN9RFLCc_wjcbcEJ808g.PNG/이미지_11.png?type=attachment"
            }
        ],
        "authority": {
            "isDoLike": true,
            "isEnableAttachFileDownload": true,
            "isHeadModifiable": false,
            "isModify": false,
            "isMove": false,
            "isRemove": false,
            "isReport": true,
            "isRightClick": true,
            "isSharable": true,
            "isShowLike": true,
            "isShowReply": false,
            "isShowStatistics": false,
            "isStore": false,
            "isWrite": true,
            "isWriteComment": true,
            "isWriteReply": true
        },
        "cafe": {
            "exposeReservation": false,
            "hasPopularArticle": true,
            "id": 29537083,
            "image": {
                "service": "CAFE",
                "type": "f100_100",
                "url": "https://mcafethumb-phinf.pstatic.net/MjAxOTAyMjVfMTg5/MDAxNTUxMDg2MDc1OTY2.umN5Kq9Z2sFRSdAXyJ2sz9UAlE0ofXm-dWJIRbeRbvsg.i_KxnwZ-FvDMQLnpo0ZYMo0Zl9JjOAPGWozW-WnLXJQg.PNG.wltjdqls5304/image.png"
            },
            "introduction": "자바스크립트를 사용하는 카카오톡 봇 관련 커뮤니티 입니다.",
            "isDormant": false,
            "memberCount": 5248,
            "name": "카카오톡 봇 커뮤니티",
            "openType": "O",
            "pcCafeName": "카카오톡 봇 커뮤니티",
            "url": "nameyee",
            "usingMemberLevel": true
        },
        "cafeId": 29537083,
        "comments": {
            "alarm": {
                "isChecked": false,
                "isShow": true
            },
            "disableWriteReason": "",
            "items": [
                {
                    "content": "장장 2일이 걸린 글입니다.\n왜냐고요? 중간 중간 게임하느라고요.",
                    "id": 94358312,
                    "isArticleWriter": true,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": false,
                    "isRemovable": false,
                    "refId": 94358312,
                    "updateDate": 1592738394000,
                    "writer": {
                        "id": "ifthe1201",
                        "image": {
                            "isAnimated": false,
                            "service": "BLOG",
                            "type": "c77_77",
                            "url": "https://blogpfthumb-phinf.pstatic.net/MjAyMDA3MTBfNzYg/MDAxNTk0MzQ0ODU1NTQ2.yMeR8-E78VjjzqeGOQo6OGr0sojinj5Dir7Ji_HIy4sg.li_e14s0igjSliOLSzii9fiomrURQFUCzAMWcKfSkvIg.PNG.ifthe1201/fox.png"
                        },
                        "nick": "윤"
                    }
                },
                {
                    "content": "사랑해요",
                    "id": 94358507,
                    "isArticleWriter": false,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": false,
                    "isRemovable": false,
                    "refId": 94358507,
                    "updateDate": 1592738548000,
                    "writer": {
                        "id": "hozinryu",
                        "image": {
                            "isAnimated": false,
                            "service": "BLOG",
                            "type": "c77_77",
                            "url": "https://blogpfthumb-phinf.pstatic.net/20200828_147/hozinryu_1598577910916IfMMA_PNG/image.png"
                        },
                        "nick": "알랑뿡까"
                    }
                },
                {
                    "content": "예쁘신가요",
                    "id": 94358658,
                    "isArticleWriter": true,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": true,
                    "isRemovable": false,
                    "refId": 94358507,
                    "updateDate": 1592738672000,
                    "writer": {
                        "id": "ifthe1201",
                        "image": {
                            "isAnimated": false,
                            "service": "BLOG",
                            "type": "c77_77",
                            "url": "https://blogpfthumb-phinf.pstatic.net/MjAyMDA3MTBfNzYg/MDAxNTk0MzQ0ODU1NTQ2.yMeR8-E78VjjzqeGOQo6OGr0sojinj5Dir7Ji_HIy4sg.li_e14s0igjSliOLSzii9fiomrURQFUCzAMWcKfSkvIg.PNG.ifthe1201/fox.png"
                        },
                        "nick": "윤"
                    }
                },
                {
                    "content": "입문자요?",
                    "id": 94359854,
                    "isArticleWriter": false,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": false,
                    "isRemovable": false,
                    "refId": 94359854,
                    "updateDate": 1592739485000,
                    "writer": {
                        "id": "gaonmoon0406",
                        "image": {
                            "service": "CAFE",
                            "type": "c77_77",
                            "url": "https://ssl.pstatic.net/static/cafe/cafe_pc/default/cafe_profile_77.png"
                        },
                        "nick": "BennyK"
                    }
                },
                {
                    "content": "네 등급이 그렇습니다",
                    "id": 94360074,
                    "isArticleWriter": true,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": true,
                    "isRemovable": false,
                    "refId": 94359854,
                    "updateDate": 1592739616000,
                    "writer": {
                        "id": "ifthe1201",
                        "image": {
                            "isAnimated": false,
                            "service": "BLOG",
                            "type": "c77_77",
                            "url": "https://blogpfthumb-phinf.pstatic.net/MjAyMDA3MTBfNzYg/MDAxNTk0MzQ0ODU1NTQ2.yMeR8-E78VjjzqeGOQo6OGr0sojinj5Dir7Ji_HIy4sg.li_e14s0igjSliOLSzii9fiomrURQFUCzAMWcKfSkvIg.PNG.ifthe1201/fox.png"
                        },
                        "nick": "윤"
                    }
                },
                {
                    "content": "저도 입문할래요",
                    "id": 94360933,
                    "isArticleWriter": false,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": true,
                    "isRemovable": false,
                    "refId": 94359854,
                    "replyMember": {
                        "id": "ifthe1201",
                        "nick": "윤"
                    },
                    "updateDate": 1592740169000,
                    "writer": {
                        "id": "gaonmoon0406",
                        "image": {
                            "service": "CAFE",
                            "type": "c77_77",
                            "url": "https://ssl.pstatic.net/static/cafe/cafe_pc/default/cafe_profile_77.png"
                        },
                        "nick": "BennyK"
                    }
                },
                {
                    "content": "와 대단해요 ㄷㄷ\n내용은 이해가안가지만 결과물을 보니 입이 떡 벌어지네요",
                    "id": 94359892,
                    "isArticleWriter": false,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": false,
                    "isRemovable": false,
                    "refId": 94359892,
                    "updateDate": 1592739511000,
                    "writer": {
                        "id": "taesu0905",
                        "image": {
                            "service": "CAFE",
                            "type": "c77_77",
                            "url": "https://ssl.pstatic.net/static/cafe/cafe_pc/default/cafe_profile_77.png"
                        },
                        "nick": "리페"
                    }
                },
                {
                    "content": "감사합니다",
                    "id": 94360096,
                    "isArticleWriter": true,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": true,
                    "isRemovable": false,
                    "refId": 94359892,
                    "sticker": {
                        "height": 112,
                        "id": "ogq_58146d6d0ab0a-8-185-160",
                        "type": "p100_100",
                        "url": "https://storep-phinf.pstatic.net/ogq_58146d6d0ab0a/original_8.png",
                        "width": 129
                    },
                    "updateDate": 1592739634000,
                    "writer": {
                        "id": "ifthe1201",
                        "image": {
                            "isAnimated": false,
                            "service": "BLOG",
                            "type": "c77_77",
                            "url": "https://blogpfthumb-phinf.pstatic.net/MjAyMDA3MTBfNzYg/MDAxNTk0MzQ0ODU1NTQ2.yMeR8-E78VjjzqeGOQo6OGr0sojinj5Dir7Ji_HIy4sg.li_e14s0igjSliOLSzii9fiomrURQFUCzAMWcKfSkvIg.PNG.ifthe1201/fox.png"
                        },
                        "nick": "윤"
                    }
                },
                {
                    "content": "와! 윤님의 목소리!",
                    "id": 94394260,
                    "isArticleWriter": false,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": false,
                    "isRemovable": false,
                    "refId": 94394260,
                    "updateDate": 1592777621000,
                    "writer": {
                        "id": "sungbin_dev",
                        "image": {
                            "isAnimated": false,
                            "service": "CAFE",
                            "type": "c77_77",
                            "url": "https://cafethumb.pstatic.net/MjAyMDEwMzBfMzUg/MDAxNjA0MDMwMDYwNzM5.kjePgFoxEs7f_8UwkpF6JtLFx2dFUz9gNtlwgrEPzwEg.agBPDgSw14rZWK1sN50QMz9ncBqE0I9DIq22M9ESoE4g.PNG/z.png"
                        },
                        "nick": "성빈"
                    }
                },
                {
                    "content": "부끄럽습니다",
                    "id": 94396245,
                    "isArticleWriter": true,
                    "isDeleted": false,
                    "isNew": false,
                    "isRef": true,
                    "isRemovable": false,
                    "refId": 94394260,
                    "updateDate": 1592779274000,
                    "writer": {
                        "id": "ifthe1201",
                        "image": {
                            "isAnimated": false,
                            "service": "BLOG",
                            "type": "c77_77",
                            "url": "https://blogpfthumb-phinf.pstatic.net/MjAyMDA3MTBfNzYg/MDAxNTk0MzQ0ODU1NTQ2.yMeR8-E78VjjzqeGOQo6OGr0sojinj5Dir7Ji_HIy4sg.li_e14s0igjSliOLSzii9fiomrURQFUCzAMWcKfSkvIg.PNG.ifthe1201/fox.png"
                        },
                        "nick": "윤"
                    }
                }
            ],
            "last": {
                "id": 102272874,
                "refId": 102272874
            },
            "next": {
                "id": 94395852,
                "refId": 94395852
            }
        },
        "editorVersion": "LEGACY",
        "errorCode": null,
        "heads": [],
        "isReadOnlyMode": false,
        "isW800": true,
        "readOnlyModeInfo": {
            "emergency": false,
            "linkToNoticeURL": "https://section.cafe.naver.com/cafe-home/cafe-notice?noticeId=1650",
            "readOnlyNoticeDuration": "",
            "timeToNotice": false,
            "timeToPreNotice": false
        },
        "tags": []
    }
}